<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel Interno com ChatBot</title>
    <style>
        :root { /* ... suas variáveis de cor ... */ }
        body { /* ... seu estilo de body ... */ }
        .app-container { /* ... etc ... */ }
        /* Cole todo o seu CSS aqui, ele não precisa mudar */
    </style>
</head>
<body>

    <div class="app-container">
        </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- REFERÊNCIAS AOS ELEMENTOS (sem alteração) ---
            const chatBox = document.getElementById('chat-box');
            const userInput = document.getElementById('user-input');
            const quickQuestionsList = document.getElementById('quick-questions-list');
            const quickActionsContainer = document.getElementById('quick-actions-container');
            const newsList = document.getElementById('news-list');
            
            // --- URLs DAS DUAS APIs SEPARADAS ---
            // 1. A URL do seu script de chatbot principal (a que já funciona)
            const CHAT_API_URL = "https://script.google.com/macros/s/AKfycbz5duzxWIZ7Dh9ngvdp4-HhxkcTQb_uGuz3RvQ8WyzMu-NwyckeXsUcH-VKiaWZRkbW/exec"; 

            // 2. A NOVA URL, exclusiva para as notícias (que você acabou de criar)
            const NEWS_API_URL = "https://script.google.com/macros/s/AKfycbyxgeh-zWeFsDx8U6HxzrSuui82hJDQNfLHG6mmcHuXtxX8pj14Xf2Ct4zpxhvcSSMp/exec";

            // --- FUNÇÕES DO CHAT (lógica interna alterada) ---

            function addMessage(message, sender) { /* ...código sem alteração... */ }
            function toggleLoader(show) { /* ...código sem alteração... */ }
            
            async function buscarResposta(textoDaPergunta) {
                if (textoDaPergunta.trim() === "") return;
                toggleLoader(true);
                try {
                    // USA A URL DO CHAT
                    const response = await fetch(`${CHAT_API_URL}?pergunta=${encodeURIComponent(textoDaPergunta)}`);
                    const data = await response.json();
                    toggleLoader(false);
                    if (data.status === 'sucesso') { addMessage(data.resposta, 'bot'); } 
                    else { addMessage(data.mensagem, 'bot'); }
                } catch (error) {
                    toggleLoader(false);
                    console.error("Erro ao buscar resposta:", error);
                    addMessage("Erro de conexão com o sistema de respostas.", 'bot');
                }
            }

            async function carregarNoticias() {
                 try {
                    newsList.innerHTML = '<p>Carregando notícias...</p>';
                    // USA A NOVA URL DE NOTÍCIAS
                    const response = await fetch(NEWS_API_URL);
                    const data = await response.json();
                    if (data.status === 'sucesso' && data.noticias.length > 0) {
                        newsList.innerHTML = '';
                        data.noticias.forEach(item => {
                            const newsDiv = document.createElement('div');
                            newsDiv.classList.add('news-item');
                            let linkHtml = item.link ? `<a href="${item.link}" target="_blank">Leia mais...</a>` : '';
                            newsDiv.innerHTML = `<h4>${item.titulo}</h4><small>Publicado em: ${item.data}</small><p>${item.conteudo}</p>${linkHtml}`;
                            newsList.appendChild(newsDiv);
                        });
                    } else { newsList.innerHTML = `<p>Nenhuma notícia encontrada.</p><small>${data.mensagem || ''}</small>`; }
                } catch (error) { console.error("Erro ao buscar notícias:", error); newsList.innerHTML = '<p>Não foi possível carregar as notícias.</p>'; }
            }
            
            function handleSendMessage(text) {
                if (!text || !text.trim()) return;
                addMessage(text, 'user');
                buscarResposta(text);
                if (userInput.value) { userInput.value = ''; }
            }

            // --- EVENT LISTENERS (sem alteração) ---
            userInput.addEventListener('keydown', (e) => { /* ... */ });
            quickQuestionsList.addEventListener('click', (e) => { /* ... */ });
            quickActionsContainer.addEventListener('click', (e) => { /* ... */ });

            // --- ATIVAÇÃO INICIAL (sem alteração) ---
            carregarNoticias();
        });
    </script>
</body>
</html>
